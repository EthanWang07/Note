%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Packages
\documentclass[10pt, a4paper]{article}
\usepackage[UTF8]{ctex}
\usepackage[top=3cm, bottom=4cm, left=3.5cm, right=3.5cm]{geometry}
\usepackage{amsmath,amsthm,amsfonts,amssymb,amscd, fancyhdr, color, comment, graphicx, environ}
\usepackage{float}
\usepackage{mathrsfs}
\usepackage[math-style=ISO]{unicode-math}
\setmathfont{TeX Gyre Termes Math}
\usepackage{lastpage}
\usepackage[dvipsnames]{xcolor}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{enumerate}
\usepackage[shortlabels]{enumitem}
\usepackage{fancyhdr}
\usepackage{indentfirst}
\usepackage{listings}
\usepackage{sectsty}
\usepackage{thmtools}
\usepackage{shadethm}
\usepackage{hyperref}
\usepackage{setspace}
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=blue,
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Environment setup
\mdfsetup{skipabove=\topskip,skipbelow=\topskip}
\newrobustcmd\ExampleText{%
An \textit{inhomogeneous linear} differential equation has the form
\begin{align}
L[v ] = f,
\end{align}
where $L$ is a linear differential operator, $v$ is the dependent
variable, and $f$ is a given non−zero function of the independent
variables alone.
}
\mdfdefinestyle{theoremstyle}{%
linecolor=black,linewidth=1pt,%
frametitlerule=true,%
frametitlebackgroundcolor=gray!20,
innertopmargin=\topskip,
}
\mdtheorem[style=theoremstyle]{Problem}{Problem}
\newenvironment{Solution}{\textbf{Solution.}}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}  %设置代码环境

%Page setup
\pagestyle{fancy}
\headheight 35pt
\lhead{\today}
\rhead{\includegraphics[width=2.5cm]{logo-nju.jpg}}
\lfoot{}
\pagenumbering{arabic}
\cfoot{\small\thepage}
\rfoot{}
\headsep 1.2em
\renewcommand{\baselinestretch}{1.25}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Add new commands here
\renewcommand{\labelenumi}{\alph{enumi})}
\newcommand{\Z}{\mathbb Z}
\newcommand{\R}{\mathbb R}
\newcommand{\Q}{\mathbb Q}
\newcommand{\NN}{\mathbb N}
\newcommand{\PP}{\mathbb P}
\DeclareMathOperator{\Mod}{Mod} 
\renewcommand\lstlistingname{Algorithm}
\renewcommand\lstlistlistingname{Algorithms}
\def\lstlistingautorefname{Alg.}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{case}{Case}
\newtheorem{definition}{Definition}
\newtheorem{example}{Example}
\renewcommand\proofname{Proof}
\newcommand{\assign}{:=}
\newcommand{\infixiff}{\text{ iff }}
\newcommand{\nobracket}{}
\newcommand{\backassign}{=:}
\newcommand{\tmmathbf}[1]{\ensuremath{\boldsymbol{#1}}}
\newcommand{\tmop}[1]{\ensuremath{\operatorname{#1}}}
\newcommand{\tmtextbf}[1]{\text{{\bfseries{#1}}}}
\newcommand{\tmtextit}[1]{\text{{\itshape{#1}}}}

\newenvironment{itemizedot}{\begin{itemize} \renewcommand{\labelitemi}{$\bullet$}\renewcommand{\labelitemii}{$\bullet$}\renewcommand{\labelitemiii}{$\bullet$}\renewcommand{\labelitemiv}{$\bullet$}}{\end{itemize}}
\catcode`\<=\active \def<{
\fontencoding{T1}\selectfont\symbol{60}\fontencoding{\encodingdefault}}
\catcode`\>=\active \def>{
\fontencoding{T1}\selectfont\symbol{62}\fontencoding{\encodingdefault}}
\catcode`\<=\active \def<{
\fontencoding{T1}\selectfont\symbol{60}\fontencoding{\encodingdefault}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%Begin now!




\begin{document}
\include{Title page for notes}

\section*{Unit 1: Differentiation}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{Part A: Definition and Basic Rules}

\begin{definition}
    The derivative $f'(x_0)$ of $f$ at $x_0$ is the slope of the tangent line
    to $y = f(x)$ at the point $P = (x_0, f(x_0)$.
\end{definition}

Formula for the derivative:
\[
\hspace{2cm}
\begin{aligned}
    \underbrace{f'(x_0)}_{\text{derivative of } f \text{ at } x_0} &=
    \lim_{x \to 0} \frac{\Delta f}{\Delta x} &=
    \lim_{x \to 0} \underbrace{\frac{f(x_0+\Delta x)-f(x_0)}{\Delta x}}_{\text{difference quotient}}
\end{aligned}
\]

\begin{Problem}
    Does $f(x)=\left\lfloor x \right\rfloor $ have a derivative? If so, what is it? If not, why not?
\end{Problem}
\begin{Solution}
    The ``limit as $\Delta x$ approaches 0''  isn't
    well defined, so $f(x)$ is not differentiable at $x = 0$.
    (The left-hand limit and right hand limit are not equal)
\end{Solution}


\subsubsection*{Notations}
Just as there are many ways to express the same thing,
there are many notations for the derivative.
\begin{enumerate}
    \item $\Delta y = \Delta f$
    \item Taking the limit as $\Delta x \to 0$, we get
    \begin{enumerate}
        \item $\frac{\Delta y}{\Delta x} \to \frac{\mathrm{d}y}{\mathrm{d}x}$ (Leibniz' notation)
        \item $\frac{\Delta f}{\Delta x} \to f'(x_0)$ (Newton's notation)
    \end{enumerate}
\end{enumerate}

\begin{example}
    Find the derivative of $f(x)=x^n$ where $n=1,2,3\dots$ \\
    Here we have:
    \[
        \frac{\Delta y}{\Delta x}=\frac{(x+\Delta x)^n-x^n}{\Delta x}
    \]
    The \textbf{binomial theorem} tells us that:
    \[
        x^n+n(\Delta x)x^{n-1}+O\left((\Delta x)^2\right)
    \]
    where $O(\Delta x)^2$ is shorthand for 
    ``all of the terms with $(\Delta x)^2$,$(\Delta x)^3$
    ,and so on up to $(\Delta x)^n$''

    Now we have:
    \[
    \begin{aligned}
        \frac{\Delta y}{\Delta x}=\frac{(x+\Delta x)^n-x^n}{\Delta x}=\frac{(x^n+n(\Delta x)(x^{n-1})+O(\Delta x)^2)-x^n}{\Delta x}=nx^{n-1}+O(\Delta x)
    \end{aligned}
    \]
    and therefore,
    \[
        \frac{d}{dx}x^n = nx^{n-1}
    \]
\end{example}

Since we think about $\frac{\Delta y}{\Delta x}$ as the average change in $y$ over an interval of size $\Delta x$
The derivatives $\frac{dy}{dx}$ can also be taken as the instantaneous rate of change.


\begin{definition}
    The \textbf{right(left)-hand limit} of a function \(f(x)\) as \(x\) approaches \(a\)
    ,denoted as \(\lim_{{x \to a^+}} f(x)\), represents the value that \(f(x)\) approaches 
    as \(x\) gets arbitrarily close to \(a\) from the right (left) side 
    (i.e., from values greater than \(a\)).
\end{definition}

\begin{definition}
    A function $f$ is \textbf{continuous} at $x_0$ if \(\lim_{{x \to x_0}} f(x) = f(x_0)\). Which means:
    \begin{itemize}[label=$\ast$]  
        \item $\lim_{x\to x_0^+}f(x)=\lim_{x\to x_0^-}f(x)$; both of these one sided limits exist.
        \item $f(x_0)$ is defined.
        \item $\lim_{x\to x_0^+}f(x)=\lim_{x\to x_0^-}f(x)=f(x_0).$
    \end{itemize}

\end{definition}

\begin{definition}
    Discontinuity
    \begin{enumerate}
        \item A \textbf{jump discontinuity} occurs when the right-hand and left-hand limits exist but are not equal.
        \item At a \textbf{removable discontinuity}, the left-hand and right-hand limits are equal but
        either the function is not defined or not equal to these limits:
        \[
            \lim_{x\to x_0^+}f(x)=\lim_{x\to x_0^-}f(x)\neq f(x_0)    
        \]
        \item In an \textbf{infinite discontinuity}, the left- and right-hand limits are infinite.(e.g hyperbola)
    \end{enumerate}
\end{definition}

\begin{theorem}
    If $f$ is differentiable at $x_0$, then f is continuous at $x_0$.
\end{theorem}
\begin{proof}
    To show that:
    \[
        \lim_{x\to x_0}f(x) - f(x_0) = 0    
    \]
    \begin{align*}
        \lim_{x\to x_0}f(x) - f(x_0) &= \lim_{x\to x_0}\frac{f(x)-f(x_0)}{x-x_0}(x-x_0)\\
        &= f'(x_0)\cdot 0\\
        &= 0
    \end{align*}
    （we used the assumption that $f$ was differentiable when we wrote down $f'(x)$.）
\end{proof}

\subsubsection*{Derivative of $\sin x$ and $\cos x$, Algebraic Proof}
Begin with the definition of the derivative:
\[
    \frac{d}{dx}\sin x=\lim_{\Delta x\to0}\frac{\sin(x+\Delta x)-\sin(x)}{\Delta x}
\]
By using $\sin(a+b)=\sin(a)\cos(b)+\sin(b)\cos(a)$ we can get:
\[
\begin{aligned}
    \frac{d}{dx}\sin x &=\lim_{\Delta x\to0}\frac{\sin x\cos\Delta x+\cos x\sin\Delta x-\sin(x)}{\Delta x}\\
    &= \lim_{\Delta x\to0}\sin x\left(\frac{\cos\Delta x-1}{\Delta x}\right)+\lim_{\Delta x\to0}\cos x\left(\frac{\sin\Delta x}{\Delta x}\right)\\
\end{aligned}
\]
Here we introduce two important facts: \textbf{a)$\lim_{x\to 0}\frac{\sin x}{x} = 1$ b)$\lim_{x\to 0}\frac{\cos x -1}{x}$}.
Hence, we conclude:
\[
    \frac{d}{dx}\sin x = \cos x
\]
The calculation of the derivative of $\cos x$ is similar to that of the derivative of $\sin x$. 
The proof of the two properties above are ommitted here.

\begin{theorem}
    \textbf{Product Rule}
    \[
        (uv)' = u'v + uv'
    \]
\end{theorem}

\begin{proof}
    \begin{align*}
        (uv)' &= \lim_{\Delta x\to0}\frac{(uv)(x+\Delta x)-(uv)(x)}{\Delta x}  \\
        &= \lim_{\Delta x\to0}\frac{u(x+\Delta x)v(x+\Delta x)-u(x)v(x)}{\Delta x} \\
        &= \lim\limits_{\Delta x\to0}\frac{u(x+\Delta x)v(x)-u(x)v(x)+u(x+\Delta x)v(x+\Delta x)-u(x+\Delta x)v(x)}{\Delta x} \\
        &= \lim\limits_{\Delta x\to0}\left[\left(\frac{u(x+\Delta x)-u(x)}{\Delta x}\right)v(x)+u(x+\Delta x)\left(\frac{v(x+\Delta x)-v(x)}{\Delta x}\right)\right] \\
        &=u'(x)v(x)+u(x)v'(x)
    \end{align*}
\end{proof}

\begin{theorem}
    \textbf{Quotient Rule}
    \[
        \left(\frac uv\right)'=\frac{u'v-uv'}{v^2}
    \]
\end{theorem}

\begin{theorem}
    \textbf{Chain Rule}:The derivative of a composition of functions is a product. 
    \[
        \lim_{\Delta t\to0}\frac{\Delta y}{\Delta t}=\frac{dy}{dt}=\frac{dy}{dx}\frac{dx}{dt}
    \]
\end{theorem}

\subsubsection*{Notations}
Higher derivatives are derivatives of derivatives.
\[
    \begin{array}{|c|c|c|c|}
        \hline
        f'(x) & Df & \frac{df}{dx} & \frac{d}{dx}f \\
        f''(x) & D^2 f & \frac{d^2f}{dx^2} & \left(\frac{d}{dx}\right)^2f \\
        f'''(x) & D^3 f & \frac{d^3f}{dx^3} & \left(\frac{d}{dx}\right)^3f \\
        f^{(n)}(x) & D^n f & \frac{d^nf}{dx^n} & \left(\frac{d}{dx}\right)^nf \\
        \hline
    \end{array}
\]
The symbol $\frac{d}{dx}$ represent “operators” which can be applied to a function. 
This explains why the two powers are in different locations.

\subsection*{Part B: Implicit Differentiation and Inverse Functions}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection*{Implicit Differentiation (Rational Exponent Rule)}
\[
    (x^a)' = ax^{a-1}, \forall x \in \mathbb{Q} 
\]

\begin{example}
    \textbf{Slope of a line tangent to a circle - Direct version} \\
    The graph of $x^2 + y^2 = 1$ is a circle of ridius 1 centered at the origin. 
    This equation can't be written in a form of $y = f(x)$ since every $x$ has two corresponding $y$ values.
    \[
        x^2 + y^2 = 1
    \]
    \[
        y = \pm \sqrt{1 - x^2}
    \]
    Now we just focus on the top half of the unit circle. By using the chain rule, we can have: 
    \[
        \frac{dy}{dx}=\frac12u^{-1/2}\cdot(-2x)=-x\cdot(1-x^2)^{-1/2}=\frac{-x}{\sqrt{1-x^2}}.
    \]
    \textbf{Slope of a line tangent to a circle - Implicit version} \\
    Instead of solving for $y$, we could just imply the operator $\frac{d}{dx}$ to both side of the original equation:
    \begin{align*}
        x^2 + y^2 &= 1 \\
        \frac{d}{dx} (x^2) + \frac{d}{dx} (y^2) &= 0 \\
        2x + 2y\frac{dy}{dx} &= 0 \\
        \frac{dy}{dx} &= -\frac{x}{y}
    \end{align*}
    We get the same answer and it works for both sides of the unit circle.
    Implicit differentiation simplified this calculation.
\end{example}
\begin{example}
    \textbf{Derivative of the Inverse of a Function}\\
    If $f(x) = y$ and $g(y) = x$, then $g$ is the inverse of $f$ ($g = f^{-1}$) and $f$ is the inverse of $g$.
    The graph of $f ^{−1}$ is the reflection of the graph of $f$ across the line $y = x$. So we have:
    \[
        \frac d{dy}(f^{-1}(y))=\frac1{\frac{dy}{dx}}.
    \]
    An example of this is the derivative of $y = \arctan(x)$. We can start from its inverse: $\tan y = x$
    \begin{align*}
        \tan y &= x \\
        \frac{d}{dx}\tan y &= \frac{d}{dx}x \\
        \left(\frac{1}{(\cos y)^2}\right)\frac{dy}{dx} &= 1 \\
        \frac{dy}{dx}\quad &= \quad\cos^2(y)\\
        \frac d{dx}\arctan(x)&=\frac1{1+x^2}. 
    \end{align*} 
\end{example}

\subsubsection*{Derivative of $a^x$}
\begin{proof}
    \begin{align*}
        a^x=\left(e^{\ln(a)}\right)^x &=e^{x\ln(a)} \\
        \frac d{dx}e^{(\ln a)x}\quad &=\quad(\ln a)e^{(\ln a)x} \\
        \frac d{dx}a^x &=(\ln a)a^x
    \end{align*}

\end{proof}

\begin{example}
    \textbf{Derivative of $x^x$}
    First, let $x$ denote $x^x$, then we take the natural log of both sides:
    \[\ln v = x\ln x\]
    Next, we differentiate both sides of the equation,:
    \begin{align*}
        (\ln v)' &= \ln x + x\cdot\frac{1}{x} \\
        \frac{v'}{v} &= \frac{1}{x} \\  
    \end{align*}
    Plugging in $x^x$ for $v$ and solving for $v'$, we get:
    \[\frac d{dx}x^x\quad=\quad x^x(1+\ln x)\]
\end{example}
    
\section*{Unit 2: Applications of Differentiation}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{Part A: Approximation and Curve Sketching}
\subsubsection*{Linear Approximation}
\begin{example}
    \textbf{Linear Approximation to lnx at $x=1$} \\
    For a given curve \(y = f(x)\), it is approximately the same as its tangent line:
    \[ \boxed{y = f(x_0) + f'(x_0)(x - x_0)} \]
    
    Let $f(x) = lnx$. Then the formula for linear approximation tells us that:
    \begin{align*}
        f(x)& \approx\quad f(x_0)+f'(x_0)(x-x_0) \\
       \text{ln x} &\approx\quad\ln(1)+1(x-1)  \\
        \text{ln x} &\approx\quad0+(x-1)  \\
        \operatorname{ln}x &\approx\quad(x-1) 
    \end{align*}
    When x is close to the base point $x_0$, the point of linear approximation is that the curve is
    approximately the same as the tangent line.
\end{example}

\begin{example}
    \textbf{Approximations at 0 for Sine, Cosine and Exponential Functions}
    Based on the formula $f(x) \approx f(0) + f'(0)x $, we have:
    \begin{enumerate}
        \item $\sin x \approx x$ (if $x \approx 0$)
        \item $\cos x \approx 1$ (if $x \approx 0$)
        \item $e^x \approx 1 + x$ (if $x \approx 0$)
    \end{enumerate}
\end{example}

\begin{example}
    \textbf{Approximations at 0 for $ln(1 + x)$ and $(1 + x)^r$}\\
    1. $ln(1+x) \approx x$ (if $x \approx 0$)\\
    2. $(1+x)^r \approx 1 + rx $ (if $x \approx 0$)
\end{example}

\subsubsection*{Quadratic Approximation}
Quadratic approximation is an extension of linear approximation by adding one more term:
\[ \boxed{f(x)\approx\underbrace{f(x_0)+f'(x_0)(x-x_0)}_\text{Linear Part}+\underbrace{\frac{f''(x_0)}2(x-x_0)^2}_\text{Quadratic Part}\quad(x\approx x_0)} \]
According to the equation above, we can calculate the following approximations:
\begin{itemize}
    \item $\sin x\approx x$  \quad(if $x \approx 0$)
    \item $\cos x\approx1-\frac{x^2}2$  \quad(if $x \approx 0$)
    \item $e^x\approx1+x+\frac12x^2$  \quad(if $x \approx 0$)
    \item $\ln(1+x)\approx x-\frac12x^2$  \quad(if $x \approx 0$)
    \item $(1+x)^r\approx 1+rx+\frac{r(r-1)}{2}x^2$  \quad(if $x \approx 0$)
\end{itemize}

\begin{Problem}
    The linear approximation of $\frac{e^{-3x}}{\sqrt{1+x}}=e^{-3x}(1+x)^{-1/2}.$
\end{Problem}
\begin{Solution}
    \[e^{-3x}(1+x)^{-1/2}\approx\left(1+(-3x)+\frac12(-3x)^2\right)\left(1+\left(-\frac12\right)x+\frac{\left(-\frac12\right)\left(-\frac32\right)}2x^2\right)\]
    \[e^{-3x}(1+x)^{-1/2}\approx1-\frac{7}{2}x+\frac{51}{8}x^2\]
\end{Solution}

\begin{definition}
    If $f'(x_0) = 0$, we call $x_0$ a critical point and $y_0 = f(x_0)$ is a critical value of f.
\end{definition}
























\end{document}